{"version":3,"sources":["gen-doc.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,OAAA,CAAQ,eAAR,CAAwB,CAAC,QAAzB,CAAA;;EACA,MAAiB,OAAA,CAAQ,aAAR,CAAjB,EAAC,UAAA,GAAD,EAAM,cAAA;;EACL,WAAY,OAAA,CAAQ,UAAR,EAAZ;;EACA,QAAS,OAAA,CAAQ,SAAR,EAAT;;EACD,MAAA,GAAS,OAAA,CAAQ,MAAR,CAAe,CAAC;;EACzB,EAAA,GAAK,OAAA,CAAQ,IAAR;;EAEL,KAAA,GAAQ,SAAC,KAAD,EAAQ,CAAR;AACP,QAAA;IAAA,CAAA,GAAI,KAAK,CAAC,WAAN,CAAkB,GAAlB;IACJ,IAAG,CAAA,IAAK,CAAR;MACC,GAAA,GAAM,KAAM;MACZ,KAAA,CAAM,IAAN,EAAY,GAAZ,EAFD;;WAIA,EAAE,CAAC,aAAH,CAAiB,KAAjB,EAAwB,CAAxB;EANO;;EASR,OAAA,GAAU,SAAC,IAAD,EAAO,SAAP;AACT,QAAA;;MADgB,YAAY;;IAC5B,EAAA,GAAK;IACL,GAAA,GAAM,SAAC,IAAD,EAAO,KAAP;aACL,EAAE,CAAC,WAAH,CAAe,IAAf,CAAoB,CAAC,OAArB,CAA6B,SAAC,IAAD;AAC5B,YAAA;QAAA,CAAA,GAAO,IAAD,GAAM,GAAN,GAAS;QACf,IAAG,EAAE,CAAC,QAAH,CAAY,CAAZ,CAAc,CAAC,WAAf,CAAA,CAAH;iBACC,GAAA,CAAI,CAAJ,EAAO,KAAA,GAAQ,CAAf,EADD;SAAA,MAAA;UAGC,IAAc,KAAA,IAAS,SAAvB;mBAAA,EAAE,CAAC,IAAH,CAAQ,CAAR,EAAA;WAHD;;MAF4B,CAA7B;IADK;IAON,GAAA,CAAI,IAAJ,EAAU,CAAV;AACC;SAAA,oCAAA;;mBAAA,CAAE;AAAF;;EAVQ;;EAeV,YAAA,GAAe,SAAC,GAAD;AACd,QAAA;IADgB,UAAA,KAAK,WAAA;IACrB,IAAc,CAAI,KAAK,CAAC,IAAN,CAAW,GAAX,CAAlB;MAAA,GAAA,IAAO,IAAP;;IACA,IAAe,CAAI,KAAK,CAAC,IAAN,CAAW,IAAX,CAAnB;MAAA,IAAA,IAAQ,IAAR;;WAGA,OAAA,CAAS,OAAA,CAAQ,GAAR,CAAT,EAAuB,SAAC,KAAD;AACtB,UAAA;MAAA,IAAG,2BAA2B,CAAC,IAA5B,CAAiC,KAAjC,CAAH;QAEC,EAAA,GAAK,OAAA,CAAQ,MAAA,CAAU,GAAD,GAAK,GAAL,GAAQ,KAAjB,CAAR;QACL,IAAA,GAAO,QAAA,CAAS,EAAT;QACP,IAAA,IAAQ;QAUR,QAAA,GAAW,KAAK,CAAC,OAAN,CAAc,2BAAd,EAA2C,OAA3C;eACX,KAAA,CAAM,IAAA,GAAO,QAAb,EAAuB,IAAvB,EAfD;;IADsB,CAAvB;EALc;;EAuBf,MAAM,CAAC,OAAP,GAAiB;IAAC,cAAA,YAAD;;AAtDjB","file":"gen-doc.js","sourceRoot":"/source/","sourcesContent":["require(\"coffee-script\").register()\n{log, foreach} = require 'coffee-mate'\n{showPage} = require './render'\n{mkdir} = require('shelljs')\nexpand = require('path').resolve\nfs = require 'fs'\n\nwrite = (fname, s) ->\n\ti = fname.lastIndexOf('/')\n\tif i >= 0\n\t\tdir = fname[0..i]\n\t\tmkdir '-p', dir\n\t\t#log 'mkdir', dir\n\tfs.writeFileSync(fname, s)\n\t#log 'write', fname\n\nreaddir = (path, min_depth = 0) ->\n\tls = []\n\trec = (path, depth) ->\n\t\tfs.readdirSync(path).forEach (item) ->\n\t\t\tp = \"#{path}/#{item}\"\n\t\t\tif fs.statSync(p).isDirectory()\n\t\t\t\trec(p, depth + 1)\n\t\t\telse\n\t\t\t\tls.push(p) if depth >= min_depth\n\trec(path, 0)\n\t(s[path.length+1...] for s in ls)\n\n#log -> readdir '.'\n\n#log -> show (Fn(Number) Number)\ngenDocuments = ({src, dest}) ->\n\tsrc += '/' if not /\\/$/.test src\n\tdest += '/' if not /\\/$/.test dest\n\t#log -> src\n\t#log -> dest\n\tforeach (readdir src), (fname) ->\n\t\tif /(.coffee|.litcoffee|.js)$/.test fname\n\t\t\t#log -> fname\n\t\t\tit = require expand(\"#{src}/#{fname}\")\n\t\t\tpage = showPage it\n\t\t\tpage += \"\"\"\n\t\t\t<style>\n\t\t\t* {\n\t\t\t\tline-height: 1.2em\n\t\t\t}\n\t\t\t.typespec .sample pre {\n\t\t\t\tmax-height: none !important;\n\t\t\t}\n\t\t\t</style>\n\t\t\t\"\"\"\n\t\t\tpageName = fname.replace /(.coffee|.litcoffee|.js)$/, '.html'\n\t\t\twrite(dest + pageName, page)\n\nmodule.exports = {genDocuments}\n\n\n"]}
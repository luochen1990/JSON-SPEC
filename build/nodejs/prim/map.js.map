{"version":3,"sources":["prim/map.coffee"],"names":[],"mappings":"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","file":"prim/map.js","sourceRoot":"/source/","sourcesContent":["require 'coffee-mate/global'\n{typeclass, instance} = require '../typeclass'\n{match, constraints, show, samples, sample, htmlInline, htmlBlock} = require '../typespec'\n{genBlockBody} = require '../helpers'\n\nclass Map\n\tconstructor: (kspec) ->\n\t\tunless kspec? and typeclass('TypeSpec').hasInstance(kspec.constructor)\n\t\t\tthrow Error \"Bad Fn Definition: TypeSpec as kspec Expected, But Got #{kspec}\"\n\t\treturn (vspec) ->\n\t\t\tunless vspec? and typeclass('TypeSpec').hasInstance(vspec.constructor)\n\t\t\t\tthrow Error \"Bad Fn Definition: TypeSpec as vspec Expected, But Got #{vspec}\"\n\t\t\tconstructor: Map\n\t\t\tkspec: kspec\n\t\t\tvspec: vspec\n\ninstance('TypeSpec')(Map).where\n\tmatch: ({kspec, vspec}) -> (v) ->\n\t\tmk = match(kspec)\n\t\tmv = match(vspec)\n\t\tv? and v.constructor is Object and all(mk)(ks = Object.keys(v)) and all(mv)(map(seek v) ks)\n\tconstraints: ({kspec, vspec}) ->\n\t\t(v) -> cons(\n\t\t\t{\n\t\t\t\tlabel: -> \"Object Expected, But Got #{v}\"\n\t\t\t\tflag: -> v? and v.constructor is Object\n\t\t\t}\n\t\t) concat [(\n\t\t\tmap((k) -> {\n\t\t\t\tlabel: -> \"Key #{json k}\" #Expected to be #{show kspec}\"#, But Got #{json k}\"\n\t\t\t\tsub: -> constraints(kspec)(k)\n\t\t\t}) Object.keys(v ? [])\n\t\t), (\n\t\t\tmap((k) -> {\n\t\t\t\tlabel: -> \"Key #{json k} 's Value \" #Expected to be #{show vspec}\" #, But Got #{json v}\"\n\t\t\t\tsub: -> constraints(vspec)(v[k])\n\t\t\t}) Object.keys(v ? [])\n\t\t)]\n\tshow: ({kspec, vspec}) ->\n\t\t\"Map(#{show kspec})(#{show vspec})\"\n\tsamples: ({kspec, vspec}) ->\n\t\tks = list take(4) samples(kspec)\n\t\tvs = list take(4) samples(vspec)\n\t\tconcat repeat [dict([[ks[0], vs[0]], [ks[1], vs[1]]]), dict([[ks[2], vs[2]], [ks[3], vs[3]]])]\n\thtmlInline: ({kspec, vspec}) ->\n\t\t\"<span class='type-maker unwrapped'>Map #{htmlInline kspec} #{htmlInline vspec}</span>\"\n\thtmlBlock: ({kspec, vspec}) ->\n\t\thead: \"<span class='type-maker'>Map (</span>\"\n\t\tbody: genBlockBody('map', 'meta-field') {key: kspec, value: vspec}\n\t\ttail: \"<span class='type-maker'>)</span>\"\n\nmodule.exports = {Map}\n"]}
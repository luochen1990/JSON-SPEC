{"version":3,"sources":["prim/tree.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,OAAA,CAAQ,oBAAR;;EACA,MAAwB,OAAA,CAAQ,cAAR,CAAxB,EAAC,gBAAA,SAAD,EAAY,eAAA;;EACZ,OAAqE,OAAA,CAAQ,aAAR,CAArE,EAAC,aAAA,KAAD,EAAQ,mBAAA,WAAR,EAAqB,YAAA,IAArB,EAA2B,eAAA,OAA3B,EAAoC,cAAA,MAApC,EAA4C,kBAAA,UAA5C,EAAwD,iBAAA;;EACxD,OAAgC,OAAA,CAAQ,YAAR,CAAhC,EAAC,uBAAA,eAAD,EAAkB,kBAAA;;EAEZ;IACQ,cAAC,SAAD;MACZ,IAAA,CAAO,UAAA,CAAW,SAAX,CAAP;AACC,cAAM,KAAA,CAAM,0DAAN,EADP;;AAGA,aAAO;QACN,WAAA,EAAa,IADP;QAEN,SAAA,EAAW,SAFL;;IAJK;;;;;;EASd,QAAA,CAAS,UAAT,CAAA,CAAqB,IAArB,CAA0B,CAAC,KAA3B,CACC;IAAA,KAAA,EAAO,SAAC,CAAD;aAAO,SAAC,CAAD;AACb,YAAA;QAAC,YAAa,EAAb;eACD,WAAA,IAAO,qBAAP,IAAwB,qBAAxB,IAAyC,CAAC,CAAC,SAAF,YAAuB,KAAhE,IAA0E,KAAA,CAAM,SAAN,CAAA,CAAiB,CAAC,CAAC,SAAnB,CAA1E,IAA4G,GAAA,CAAI,KAAA,CAAM,CAAN,CAAJ,CAAA,CAAc,CAAC,CAAC,SAAhB;MAF/F;IAAP,CAAP;IAGA,WAAA,EAAa,SAAC,CAAD;AACZ,UAAA;MAAC,YAAa,EAAb;aACD,SAAC,CAAD;AAAO,YAAA;eAAA,IAAA,CACN;UACC,KAAA,EAAO,SAAA;mBAAK,CAAC,IAAA,CAAK,CAAL,CAAD,CAAA,GAAQ,qBAAR,GAA6B;UAAlC,CADR;UAEC,IAAA,EAAM,SAAA;mBAAG,WAAA,IAAO,qBAAP,IAAwB,qBAAxB,IAAyC,CAAC,CAAC,SAAF,YAAuB;UAAnE,CAFP;SADM,CAAA,CAKL,IAAA,CACD;UACC,KAAA,EAAO,SAAA;mBAAG,uBAAA,GAAuB,CAAC,IAAA,CAAK,SAAL,CAAD;UAA1B,CADR;UAEC,GAAA,EAAK,SAAA;mBAAG,WAAA,CAAY,SAAZ,CAAA,CAAuB,CAAC,CAAC,SAAzB;UAAH,CAFN;SADC,CAAA,CAMD,GAAA,CAAI,SAAC,CAAD;iBACH;YACC,KAAA,EAAO,SAAA;qBAAK,CAAC,IAAA,CAAK,CAAL,CAAD,CAAA,GAAQ;YAAb,CADR;YAEC,GAAA,EAAK,SAAA;qBAAG,WAAA,CAAY,CAAZ,CAAA,CAAe,CAAf;YAAH,CAFN;;QADG,CAAJ,CAAA,4DAKkB,EALlB,CANC,CALK;MAAP;IAFY,CAHb;IAuBA,IAAA,EAAM,SAAC,GAAD;AACL,UAAA;MADO,YAAD,IAAC;aACP,SAAA,GAAS,CAAC,IAAA,CAAK,SAAL,CAAD,CAAT,GAAyB;IADpB,CAvBN;IAyBA,OAAA,EAAS,SAAC,GAAD;AACR,UAAA;MADU,YAAD,IAAC;MACV,EAAA,GAAK,IAAA,CAAK,IAAA,CAAK,CAAL,CAAA,CAAQ,OAAA,CAAQ,SAAR,CAAR,CAAL;MACL,EAAA,GAAK;QAAC,SAAA,EAAW,EAAG,CAAA,CAAA,CAAf;QAAmB,SAAA,EAAW,EAA9B;;MACL,EAAA,GAAK;QAAC,SAAA,EAAW,EAAG,CAAA,CAAA,CAAf;QAAmB,SAAA,EAAW,CAAC,EAAD,CAA9B;;aACL,MAAA,CAAO,MAAA,CAAO,CAAC,EAAD,EAAK,EAAL,CAAP,CAAP;IAJQ,CAzBT;IA8BA,UAAA,EAAY,SAAC,GAAD;AACX,UAAA;MADa,YAAD,IAAC;aACb,0CAAA,GAA0C,CAAC,UAAA,CAAW,SAAX,CAAD,CAA1C,GAAgE;IADrD,CA9BZ;IAgCA,SAAA,EAAW,SAAC,GAAD;AACV,UAAA;MADY,YAAD,IAAC;aACZ,eAAA,CAAgB,SAAC,IAAD;eACf,gCAAA,GAAiC,IAAjC,GAAsC;MADvB,CAAhB,CAAA,CAEE,SAFF;IADU,CAhCX;GADD;;EAsCA,MAAM,CAAC,OAAP,GAAiB;IAAC,MAAA,IAAD;;AArDjB","file":"prim/tree.js","sourceRoot":"/source/","sourcesContent":["require 'coffee-mate/global'\n{typeclass, instance} = require '../typeclass'\n{match, constraints, show, samples, sample, htmlInline, htmlBlock} = require '../typespec'\n{expandBlockHead, isTypeSpec} = require '../helpers'\n\nclass Tree\n\tconstructor: (labelSpec) ->\n\t\tunless isTypeSpec(labelSpec)\n\t\t\tthrow Error \"Bad Tree Type Definition: TypeSpec as labelSpec Expected\"\n\n\t\treturn {\n\t\t\tconstructor: Tree\n\t\t\tlabelSpec: labelSpec\n\t\t}\n\ninstance('TypeSpec')(Tree).where\n\tmatch: (t) -> (v) ->\n\t\t{labelSpec} = t\n\t\tv? and v.rootLabel? and v.subForest? and v.subForest instanceof Array and match(labelSpec)(v.rootLabel) and all(match(t))(v.subForest)\n\tconstraints: (t) ->\n\t\t{labelSpec} = t\n\t\t(v) -> cons(\n\t\t\t{\n\t\t\t\tlabel: -> \"#{show t} Expected, But Got #{v}\"\n\t\t\t\tflag: -> v? and v.rootLabel? and v.subForest? and v.subForest instanceof Array\n\t\t\t}\n\t\t) cons(\n\t\t\t{\n\t\t\t\tlabel: -> \"Label Expected to be #{show labelSpec}\"\n\t\t\t\tsub: -> constraints(labelSpec)(v.rootLabel)\n\t\t\t}\n\t\t)(\n\t\t\tmap((x) ->\n\t\t\t\t{\n\t\t\t\t\tlabel: -> \"#{show t} Expected\"\n\t\t\t\t\tsub: -> constraints(t)(x)\n\t\t\t\t}\n\t\t\t) (v?.subForest ? [])\n\t\t)\n\tshow: ({labelSpec}) ->\n\t\t\"T.Tree(#{show labelSpec})\"\n\tsamples: ({labelSpec}) ->\n\t\tls = list take(2) samples labelSpec\n\t\ts0 = {rootLabel: ls[0], subForest: []}\n\t\ts1 = {rootLabel: ls[1], subForest: [s0]}\n\t\tconcat repeat [s0, s1]\n\thtmlInline: ({labelSpec}) ->\n\t\t\"<span class='type-maker unwrapped'>Tree #{htmlInline labelSpec}</span>\"\n\thtmlBlock: ({labelSpec}) ->\n\t\texpandBlockHead((head) ->\n\t\t\t\"<span class='type-maker'>Tree #{head}</span>\"\n\t\t) labelSpec\n\nmodule.exports = {Tree}\n"]}
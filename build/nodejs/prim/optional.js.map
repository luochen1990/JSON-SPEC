{"version":3,"sources":["prim/optional.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,OAAA,CAAQ,oBAAR;;EACA,MAAwB,OAAA,CAAQ,cAAR,CAAxB,EAAC,gBAAA,SAAD,EAAY,eAAA;;EACZ,OAA4E,OAAA,CAAQ,aAAR,CAA5E,EAAC,aAAA,KAAD,EAAQ,aAAA,KAAR,EAAe,mBAAA,WAAf,EAA4B,YAAA,IAA5B,EAAkC,eAAA,OAAlC,EAA2C,cAAA,MAA3C,EAAmD,kBAAA,UAAnD,EAA+D,iBAAA;;EAC/D,OAAgC,OAAA,CAAQ,YAAR,CAAhC,EAAC,uBAAA,eAAD,EAAkB,kBAAA;;EAEZ;IACQ,kBAAC,IAAD;MACZ,IAAA,CAAO,UAAA,CAAW,IAAX,CAAP;AACC,cAAM,KAAA,CAAM,yDAAN,EADP;;AAGA,aAAO;QACN,WAAA,EAAa,QADP;QAEN,IAAA,EAAM,IAFA;;IAJK;;;;;;EASd,QAAA,CAAS,UAAT,CAAA,CAAqB,QAArB,CAA8B,CAAC,KAA/B,CACC;IAAA,KAAA,EAAO,SAAC,GAAD;AAAY,UAAA;MAAV,OAAD,IAAC;aAAU,QAAA,CAAS,KAAA,CAAM,IAAN,CAAT;IAAZ,CAAP;IACA,KAAA,EAAO,SAAC,GAAD;AAAY,UAAA;MAAV,OAAD,IAAC;aAAU,SAAC,CAAD;eACd,WAAJ,IAAU,KAAA,CAAM,IAAN,CAAA,CAAY,CAAZ;MADQ;IAAZ,CADP;IAGA,WAAA,EAAa,SAAC,CAAD;aAAO,SAAC,CAAD;QAAO,IAAO,SAAP;iBAAe,GAAf;SAAA,MAAA;iBAAuB;YACjD;cACC,KAAA,EAAO,SAAA;uBAAK,CAAC,IAAA,CAAK,CAAL,CAAD,CAAA,GAAQ;cAAb,CADR;cAEC,GAAA,EAAK,SAAA;uBAAG,WAAA,CAAY,CAAC,CAAC,IAAd,CAAA,CAAoB,CAApB;cAAH,CAFN;aADiD;YAAvB;;MAAP;IAAP,CAHb;IASA,IAAA,EAAM,SAAC,GAAD;AACL,UAAA;MADO,OAAD,IAAC;aACP,WAAA,GAAW,CAAC,IAAA,CAAK,IAAL,CAAD,CAAX,GAAsB;IADjB,CATN;IAWA,OAAA,EAAS,SAAC,GAAD;AACR,UAAA;MADU,OAAD,IAAC;MACV,EAAA,GAAK,IAAA,CAAK,IAAA,CAAK,CAAL,CAAA,CAAQ,OAAA,CAAQ,IAAR,CAAR,CAAL;aACL,MAAA,CAAO,MAAA,CAAO,CAAC,EAAG,CAAA,CAAA,CAAJ,EAAQ,IAAR,EAAc,EAAG,CAAA,CAAA,CAAjB,EAAqB,MAArB,CAAP,CAAP;IAFQ,CAXT;IAcA,UAAA,EAAY,SAAC,GAAD;AACX,UAAA;MADa,OAAD,IAAC;aACb,8CAAA,GAA8C,CAAC,UAAA,CAAW,IAAX,CAAD,CAA9C,GAA+D;IADpD,CAdZ;IAgBA,SAAA,EAAW,SAAC,GAAD;AACV,UAAA;MADY,OAAD,IAAC;aACZ,eAAA,CAAgB,SAAC,IAAD;eACf,oCAAA,GAAqC,IAArC,GAA0C;MAD3B,CAAhB,CAAA,CAEE,IAFF;IADU,CAhBX;GADD;;EAsBA,MAAM,CAAC,OAAP,GAAiB;IAAC,UAAA,QAAD;;AArCjB","file":"prim/optional.js","sourceRoot":"/source/","sourcesContent":["require 'coffee-mate/global'\n{typeclass, instance} = require '../typeclass'\n{shape, match, constraints, show, samples, sample, htmlInline, htmlBlock} = require '../typespec'\n{expandBlockHead, isTypeSpec} = require '../helpers'\n\nclass Optional\n\tconstructor: (spec) ->\n\t\tunless isTypeSpec(spec)\n\t\t\tthrow Error \"Bad Optional Type Definition: TypeSpec as spec Expected\"\n\n\t\treturn {\n\t\t\tconstructor: Optional\n\t\t\tspec: spec\n\t\t}\n\ninstance('TypeSpec')(Optional).where\n\tshape: ({spec}) -> Optional shape(spec)\n\tmatch: ({spec}) -> (v) ->\n\t\tnot v? or match(spec) v\n\tconstraints: (t) -> (v) -> if not v? then [] else [\n\t\t{\n\t\t\tlabel: -> \"#{show t} Expected\"\n\t\t\tsub: -> constraints(t.spec)(v)\n\t\t}\n\t]\n\tshow: ({spec}) ->\n\t\t\"Optional(#{show spec})\"\n\tsamples: ({spec}) ->\n\t\tls = list take(2) samples spec\n\t\tconcat repeat [ls[0], null, ls[1], undefined]\n\thtmlInline: ({spec}) ->\n\t\t\"<span class='type-maker unwrapped'>Optional #{htmlInline spec}</span>\"\n\thtmlBlock: ({spec}) ->\n\t\texpandBlockHead((head) ->\n\t\t\t\"<span class='type-maker'>Optional #{head}</span>\"\n\t\t) spec\n\nmodule.exports = {Optional}\n"]}
{"version":3,"sources":["prim-treemap.coffee"],"names":[],"mappings":"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","file":"prim-treemap.js","sourceRoot":"/source/","sourcesContent":["require 'coffee-mate/global'\n{typeclass, instance} = require './typeclass'\n{match, show, samples, sample, htmlInline, htmlBlock} = require './typespec'\n{genBlockBody} = require './helpers'\n\nclass TreeMap\n\tconstructor: (kspec) ->\n\t\tassert -> typeclass('TypeSpec').hasInstance(kspec.constructor)\n\t\treturn (vspec) ->\n\t\t\tassert -> typeclass('TypeSpec').hasInstance(vspec.constructor)\n\t\t\tconstructor: TreeMap\n\t\t\tkspec: kspec\n\t\t\tvspec: vspec\n\ninstance('TypeSpec')(TreeMap).where\n\tmatch: (t) -> (v) ->\n\t\t{kspec, vspec} = t\n\t\tmk = match(kspec)\n\t\tmv = match(t)\n\t\tv? and v.constructor is Object and (\n\t\t\t(\n\t\t\t\t(\n\t\t\t\t\t(tag = Object.keys(v)[0]) is 'node'\n\t\t\t\t) and (\n\t\t\t\t\tall(mk)(ks = Object.keys(v.node)) and all(mv)(map(seek v.node) ks)\n\t\t\t\t)\n\t\t\t) or (\n\t\t\t\ttag is 'leaf' and match(vspec)(v.leaf)\n\t\t\t)\n\t\t)\n\tshow: ({kspec, vspec}) ->\n\t\t\"TreeMap #{show kspec} #{show vspec}\"\n\tsamples: ({kspec, vspec}) ->\n\t\tks = list take(4) samples(kspec)\n\t\tvs = list take(3) samples(vspec)\n\t\tconcat repeat [{node: dict([[ks[0], {node: dict([[ks[2], {leaf: vs[0]}], [ks[3], {leaf: vs[1]}]])}], [ks[1], {leaf: vs[2]}]])}]\n\thtmlInline: ({kspec, vspec}) ->\n\t\t\"<span class='type-maker unwrapped'>TreeMap #{htmlInline kspec} #{htmlInline vspec}</span>\"\n\thtmlBlock: ({kspec, vspec}) ->\n\t\thead: \"<span class='type-maker'>TreeMap (</span>\"\n\t\tbody: genBlockBody('treemap', 'meta-field') {key: kspec, value: vspec}\n\t\ttail: \"<span class='type-maker'>)</span>\"\n\nmodule.exports = {TreeMap}\n"]}